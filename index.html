<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Offline Manga Generator</title>
  <style>
    body { background:#111; color:#fff; font-family:Arial; text-align:center; }
    textarea { width:80%; height:120px; margin:10px; padding:10px; font-size:16px; }
    button { padding:10px 20px; margin:10px; font-size:18px; cursor:pointer; }
    .manga-panel { 
      background:#fff; 
      color:#000; 
      margin:20px auto; 
      width:600px; 
      height:300px; 
      border:4px solid #000; 
      position:relative; 
    }
    .character { 
      width:100px; height:200px; background:#ccc; 
      position:absolute; bottom:0; left:20px; 
      border:2px solid #000;
    }
    .speech { 
      position:absolute; top:20px; left:150px; 
      background:#fff; border:2px solid #000; 
      padding:10px; border-radius:10px; 
      max-width:400px;
    }
  </style>
</head>
<body>
  <h1>Offline Manga Generator</h1>
  <textarea id="story" placeholder="Yahan apni story likho..."></textarea><br>
  <button onclick="generateManga()">Generate Manga</button>
  <button onclick="downloadManga()">Download Manga</button>
  
  <div id="mangaArea"></div>
  
  <script>
    function generateManga() {
      let story = document.getElementById("story").value;
      let lines = story.split(/[.!?]/).filter(l => l.trim().length > 0);
      let area = document.getElementById("mangaArea");
      area.innerHTML = "";
      
      lines.forEach((line, i) => {
        let panel = document.createElement("div");
        panel.className = "manga-panel";
        
        let char = document.createElement("div");
        char.className = "character";
        char.style.background = ["#ccc","#f99","#9f9","#99f"][i % 4]; // random char color
        panel.appendChild(char);
        
        let speech = document.createElement("div");
        speech.className = "speech";
        speech.innerText = line.trim();
        panel.appendChild(speech);
        
        area.appendChild(panel);
      });
    }
    
    function downloadManga() {
      let element = document.getElementById("mangaArea");
      let opt = {
        margin: 0.5,
        filename: "manga.pdf",
        html2canvas: { scale: 2 },
        jsPDF: { unit: "in", format: "letter", orientation: "portrait" }
      };
      html2pdf().from(element).set(opt).save();
    }
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
</body>
</html>
