<div id="uploadBox" style="margin-top:16px">
  <label>Upload Payment Screenshot:</label><br>
  <input type="file" id="ssInput" accept="image/*" onchange="checkUTR()">
  <p id="ssStatus" class="small" style="margin-top:6px;color:#ff8080"></p>
</div>

<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
<script>
function checkUTR(){
  let file = document.getElementById("ssInput").files[0];
  if(!file){ return; }

  document.getElementById("ssStatus").style.color="yellow";
  document.getElementById("ssStatus").innerText = "⏳ Verifying UTR...";

  // OCR run karega
  Tesseract.recognize(file,'eng',{logger:m=>console.log(m)}).then(({ data:{ text } })=>{
      console.log("OCR Text:", text);

      // Sirf 12 digit number search karna
      let utrMatch = text.match(/\b\d{12}\b/);

      if(utrMatch){
          let utr = utrMatch[0];
          console.log("Detected UTR:", utr);

          document.getElementById("ssStatus").style.color="lime";
          document.getElementById("ssStatus").innerText = "✅ UTR Verified: " + utr;

          // Yaha unlock panel open karna
          // document.getElementById("hackPanel").classList.remove("hidden");
      } else {
          document.getElementById("ssStatus").style.color="red";
          document.getElementById("ssStatus").innerText = "❌ Valid 12-digit UTR not found!";
      }
  });
}
</script>
