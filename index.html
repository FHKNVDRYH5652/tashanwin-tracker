<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WINGO Ultimate AI Predictor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4.0.2/dist/tesseract.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { background-color: #000; color: #00ffcc; font-family: monospace; padding: 20px; }
    h1 { text-align: center; animation: glow 1.5s infinite alternate; }
    @keyframes glow { from { text-shadow: 0 0 10px #0ff; } to { text-shadow: 0 0 20px #0ff; } }
    input, button { padding: 10px; font-size: 16px; margin: 10px auto; display: block; border-radius: 8px; }
    table { width: 100%; margin-top: 20px; border-collapse: collapse; }
    td, th { border: 1px solid #00ffcc; padding: 8px; text-align: center; }
    #status, #ocrText, #predictionResult, #analysisText { margin-top: 15px; white-space: pre-wrap; }
    canvas { margin-top: 20px; background: #111; border-radius: 10px; }
  </style>
</head>
<body>

<h1>🧠 WINGO ULTIMATE AI PREDICTOR 🧠</h1>

<input type="file" accept="image/*" id="imageInput" />
<button onclick="processScreenshot()">Upload & Analyze Screenshot</button>
<div id="status" style="color: yellow;"></div>
<div id="ocrText" style="color: #ccc;"></div>
<div id="predictionResult"></div>
<div id="analysisText"></div>
<table id="outputTable"></table>
<canvas id="trendChart" width="400" height="150"></canvas>
<audio id="sound" src="https://assets.mixkit.co/sfx/preview/mixkit-classic-click-1117.mp3"></audio>

<script>
async function processScreenshot() {
  const file = document.getElementById('imageInput').files[0];
  if (!file) return alert('Please upload a screenshot');
  document.getElementById('status').innerText = '📷 OCR analysis started...';
  const result = await Tesseract.recognize(file, 'eng');
  const text = result.data.text;
  document.getElementById('ocrText').innerText = text;
  document.getElementById('status').innerText = '✅ OCR complete. Predicting...';

  const lines = text.split('\\n').filter(line => line.match(/\\d{6,}/g));
  const data = lines.map(line => {
    const match = line.match(/(\\d{6,18})\\D*(\\d)/);
    if (match) return { period: match[1], number: parseInt(match[2]) };
  }).filter(Boolean).reverse().slice(0, 15);

  if (data.length < 5) {
    document.getElementById('status').innerText = '❌ Not enough valid entries (minimum 5 needed).';
    return;
  }

  const table = document.getElementById(\"outputTable\");
  table.innerHTML = '<tr><th>Period</th><th>Number</th><th>Size</th><th>Color</th></tr>' + data.map(d => {
    const size = d.number >= 5 ? 'Big' : 'Small';
    const color = [0,2,4,6,8].includes(d.number) ? 'Red' : [1,3,5,7,9].includes(d.number) ? 'Green' : 'Violet';
    return `<tr><td>${d.period}</td><td>${d.number}</td><td>${size}</td><td>${color}</td></tr>`;
  }).join('');

  const numbers = data.map(d => d.number);
  const freq = Array(10).fill(0); numbers.forEach(n => freq[n]++);
  const most = freq.indexOf(Math.max(...freq));
  const guess = (most + 1) % 10;
  const size = guess >= 5 ? 'Big' : 'Small';
  const color = [0,2,4,6,8].includes(guess) ? 'Red' : [1,3,5,7,9].includes(guess) ? 'Green' : 'Violet';
  const confidence = Math.floor(80 + Math.random()*10);
  const nextPeriod = (BigInt(data[0].period) + 1n).toString();

  document.getElementById('predictionResult').innerHTML = `🔮 <b>Next Period:</b> ${nextPeriod}<br>🎯 <b>Prediction:</b> ${guess} - ${size} - ${color}<br>🔥 <b>Confidence:</b> ${confidence}%`;
  document.getElementById('analysisText').innerText = 'AI based on last 15 results, frequency & trend analysis.';
  document.getElementById('sound').play();

  const ctx = document.getElementById('trendChart').getContext('2d');
  new Chart(ctx, {
    type: 'line',
    data: {
      labels: data.map((_, i) => `#${i+1}`),
      datasets: [{
        label: 'Trend',
        data: numbers,
        borderColor: '#00ffcc',
        backgroundColor: '#004444aa',
        tension: 0.4,
        pointBackgroundColor: '#fff',
      }]
    },
    options: {
      scales: { y: { beginAtZero: true, max: 9 } },
      responsive: true,
    }
  });
}
</script>

</body>
</html>
