<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Sureshot â€” All-in-One (Dashboard Â· User Â· Access)</title>
<style>
  :root{--bg:#071022;--card:#0f1724;--muted:#9fb0d6;--accent1:#00d2a8;--accent2:#00a6ff}
  body{margin:0;font-family:Inter,Segoe UI,Arial;background:linear-gradient(180deg,#061021,#07142a);color:#eaf6ff}
  header{padding:18px;text-align:center;font-weight:800;font-size:1.2rem;letter-spacing:0.4px}
  .wrap{max-width:980px;margin:18px auto;padding:18px}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 12px 40px rgba(0,0,0,0.5)}
  .hidden{display:none}
  .plans{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-top:12px}
  .plan{padding:12px;border-radius:10px;background:rgba(255,255,255,0.02);text-align:left}
  .plan b{display:block;font-size:1.05rem}
  .btn{padding:10px 14px;border-radius:9px;border:none;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#012;font-weight:800;cursor:pointer}
  .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
  input[type=text]{padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;width:90%;text-align:center;margin-top:10px}
  .qr{width:220px;height:220px;border-radius:12px;display:block;margin:8px auto;border:2px solid rgba(255,255,255,0.03)}
  .status{margin-top:10px;padding:10px;border-radius:8px;background:rgba(255,255,255,0.02);font-weight:700}
  .small{color:var(--muted);font-size:0.95rem}
  .history{margin-top:12px;background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;max-height:260px;overflow:auto}
  footer{padding:14px;text-align:center;color:var(--muted);font-size:0.9rem}
</style>
</head>
<body>
<header>Sureshot â€” Dashboard Â· User Â· Access (All-in-One)</header>
<div class="wrap">

  <!-- DASHBOARD -->
  <section id="screen-dashboard" class="card">
    <h2>Choose a Loss-Recovery Plan</h2>
    <div class="small">Click a plan to go to payment. Deposit shown = 10% of plan (editable at request screen).</div>
    <div class="plans" id="plansList"></div>
  </section>

  <!-- USER / PAYMENT -->
  <section id="screen-user" class="card hidden">
    <button class="btn ghost" onclick="goDashboard()" style="float:right">Back</button>
    <h2>Unlock â€” Pay & Enter UTR</h2>
    <img id="qrImg" class="qr" alt="QR Code">
    <div class="small">Scan this QR with any UPI app (or click on mobile). UPI collects amount automatically.</div>

    <div style="margin-top:12px">
      <div class="small">Payable amount (deposit):</div>
      <div id="userAmount" style="font-weight:800;font-size:1.3rem;margin-top:6px">â‚¹0</div>
    </div>

    <input id="utrInput" type="text" maxlength="12" placeholder="Enter 12-digit UTR after payment">
    <div style="margin-top:8px">
      <button class="btn" id="reqBtn" onclick="requestApproval()">Request Approval</button>
    </div>
    <div id="userStatus" class="status hidden"></div>
    <div id="userResult" style="margin-top:8px"></div>
  </section>

  <!-- ACCESS (UID -> processing -> Hack panel) -->
  <section id="screen-access" class="card hidden">
    <button class="btn ghost" onclick="goDashboard()" style="float:right">Home</button>
    <h2>Register & Deposit â€” Unlock Panel</h2>
    <p class="small">Open external registration & deposit link, deposit 10% (shown). Then enter 6-digit UID and Submit.</p>
    <p><b>Plan:</b> <span id="accessPlan">â€”</span> | <b>Deposit:</b> â‚¹<span id="accessDeposit">0</span></p>
    <div><button class="btn" onclick="openRegister()">Open Register & Deposit</button></div>

    <input id="uidInput" type="text" maxlength="6" placeholder="Enter 6-digit UID after deposit">
    <div style="margin-top:8px"><button class="btn ghost" onclick="submitUID()">Submit & Process</button></div>
    <p id="procMsg" class="small"></p>

    <div id="processingBox" class="hidden" style="margin-top:12px">
      <h3>Processing...</h3>
      <p class="small">Verifying UID â€” please wait 5 seconds</p>
      <div style="height:10px;background:#07102a;border-radius:999px;overflow:hidden">
        <div id="procBar" style="height:100%;width:0;background:linear-gradient(90deg,var(--accent1),var(--accent2));transition:width 5s linear"></div>
      </div>
    </div>

    <!-- Hack Panel -->
    <div id="hackPanel" class="hidden" style="margin-top:18px">
      <h3>Hack Opened â€” Prediction Panel</h3>
      <p class="small">Target Range: <b id="targetRange"></b> | Balance: â‚¹<b id="balanceVal"></b></p>

      <input id="periodInput" type="text" maxlength="3" placeholder="Enter last 3 digits of period (e.g. 256)">
      <div style="margin-top:10px">
        <button class="btn" id="predictBtn" onclick="getPrediction()">Get Prediction</button>
        <button class="btn ghost" onclick="markWin()">Win</button>
        <button class="btn ghost" onclick="markLoss()">Loss</button>
        <button class="btn ghost" onclick="resetSession()">Reset</button>
      </div>

      <div id="predictionText" style="margin-top:12px;font-weight:800"></div>
      <div class="history" id="historyBox"></div>
    </div>
  </section>

</div>

<footer>Local demo â€” admin approval must be done using your admin panel (it must write approved_&lt;UTR&gt; into localStorage).</footer>

<script>
/* ---------- Config ---------- */
const UPI_ID = 'perfect.k@ptaxis'; // your UPI id
const UPI_NAME = 'Sureshot';
const REGISTER_LINK = 'http://www.tashanwin.info/#/register?invitationCode=13413405256';

/* ---------- state ---------- */
let currentPlan = 3000;
let currentDeposit = 300;
let pendingUTR = '';
let pollInterval = null;

/* ---------- DOM refs ---------- */
const screenDashboard = document.getElementById('screen-dashboard');
const screenUser = document.getElementById('screen-user');
const screenAccess = document.getElementById('screen-access');

const plansList = document.getElementById('plansList');
const qrImg = document.getElementById('qrImg');
const userAmount = document.getElementById('userAmount');
const userStatus = document.getElementById('userStatus');
const userResult = document.getElementById('userResult');

const accessPlan = document.getElementById('accessPlan');
const accessDeposit = document.getElementById('accessDeposit');
const procMsg = document.getElementById('procMsg');
const procBar = document.getElementById('procBar');

const hackPanel = document.getElementById('hackPanel');
const targetRange = document.getElementById('targetRange');
const balanceVal = document.getElementById('balanceVal');
const historyBox = document.getElementById('historyBox');
const predictionText = document.getElementById('predictionText');

let balance = 0;
let level = 1;
let currentBet = 0;
let history = [];

/* ---------- populate plans ---------- */
const plans = [
  {loss:3000, price:299},
  {loss:5000, price:399},
  {loss:10000, price:499},
  {loss:25000, price:899},
  {loss:50000, price:1599},
  {loss:100000, price:2499},
  {loss:500000, price:9999}
];

function renderPlans(){
  plansList.innerHTML = '';
  plans.forEach(p=>{
    const deposit = Math.ceil(p.loss*0.10);
    const div = document.createElement('div');
    div.className = 'plan';
    div.innerHTML = `<b>${p.loss} Loss</b>
      <div class="small">Full plan price: â‚¹${p.price}</div>
      <div style="margin-top:8px">Deposit (10%): <b>â‚¹${deposit}</b></div>
      <div style="margin-top:10px"><button class="btn" onclick="choosePlan(${p.loss}, ${deposit})">Choose plan</button></div>`;
    plansList.appendChild(div);
  });
}

/* ---------- navigation ---------- */
function showScreen(id){
  screenDashboard.classList.add('hidden');
  screenUser.classList.add('hidden');
  screenAccess.classList.add('hidden');
  if(id === 'dashboard') screenDashboard.classList.remove('hidden');
  if(id === 'user') screenUser.classList.remove('hidden');
  if(id === 'access') screenAccess.classList.remove('hidden');
}

function goDashboard(){ showScreen('dashboard'); stopPolling(); }

/* ---------- choose plan -> user screen ---------- */
function choosePlan(planLoss, deposit){
  currentPlan = planLoss;
  currentDeposit = deposit;
  openUserForPlan();
}
function openUserForPlan(){
  showScreen('user');
  // set amount and generate QR
  userAmount.innerText = 'â‚¹' + currentDeposit;
  // upi:// pay link
  const upiUrl = `upi://pay?pa=${encodeURIComponent(UPI_ID)}&pn=${encodeURIComponent(UPI_NAME)}&am=${encodeURIComponent(currentDeposit)}&cu=INR`;
  // google chart api for QR visualization
  qrImg.src = 'https://chart.googleapis.com/chart?chs=300x300&cht=qr&chl=' + encodeURIComponent(upiUrl);
  // clear inputs/status
  document.getElementById('utrInput').value = '';
  userStatus.classList.add('hidden');
  userResult.innerHTML = '';
  pendingUTR = '';
}

/* ---------- Request Approval (user) ---------- */
function requestApproval(){
  const utr = document.getElementById('utrInput').value.trim();
  if(!/^[0-9]{12}$/.test(utr)){ alert('Enter valid 12-digit UTR (12 digits)'); return; }
  const key = 'pending_' + utr;
  const info = { utr: utr, amount: currentDeposit, planLoss: currentPlan, ts: Date.now() };
  try {
    localStorage.setItem(key, JSON.stringify(info));
  } catch(e) {
    alert('localStorage error: ' + e);
    return;
  }
  pendingUTR = utr;
  userStatus.classList.remove('hidden');
  userStatus.innerText = 'Pending approval for UTR ' + utr;
  userResult.innerHTML = '';
  // start polling for approval
  startPollingForApproval();
}

/* ---------- Polling for admin approval ---------- */
function startPollingForApproval(){
  stopPolling();
  pollInterval = setInterval(()=>{
    if(!pendingUTR) return;
    const appr = localStorage.getItem('approved_' + pendingUTR);
    if(appr){
      handleApproved(pendingUTR, appr);
    }
  }, 1200);
}
function stopPolling(){ if(pollInterval) { clearInterval(pollInterval); pollInterval=null; } }

/* ---------- handle approved ---------- */
function handleApproved(utr, raw){
  stopPolling();
  let info = null;
  try { info = JSON.parse(raw); } catch(e){ info = null; }
  userStatus.classList.add('hidden');
  userResult.innerHTML = '<div style="color:#b8ffce;font-weight:800">âœ… Approved for UTR ' + utr + '</div>';
  // move to access screen (no new window)
  // if admin included planLoss & amount inside approved object, use it; else use currentPlan/currentDeposit
  const planLoss = (info && info.planLoss) ? info.planLoss : currentPlan;
  const deposit = (info && info.amount) ? info.amount : currentDeposit;
  // set up access screen values then show
  accessPlan.innerText = planLoss;
  accessDeposit.innerText = deposit;
  // also store to state so access screen knows
  currentPlan = planLoss;
  currentDeposit = deposit;
  // small delay so user sees approval message
  setTimeout(()=> {
    showScreen('access');
    // initialize access state
    initAccessState();
  }, 900);
}

/* ---------- Access screen: register link, UID submit, processing ---------- */
function openRegister(){ window.open(REGISTER_LINK, '_blank'); }

function submitUID(){
  const uid = document.getElementById('uidInput').value.trim();
  if(!/^[0-9]{6}$/.test(uid)){ alert('Enter valid 6-digit UID'); return; }
  document.getElementById('procMsg').innerText = 'Processing UID ' + uid + ' ...';
  document.getElementById('processingBox').classList.remove('hidden');
  procBar.style.width = '0%';
  setTimeout(()=> procBar.style.width = '100%', 50);
  setTimeout(()=> {
    document.getElementById('processingBox').classList.add('hidden');
    // show hack panel
    document.getElementById('hackPanel').classList.remove('hidden');
    initAccessState();
  }, 5000);
}

/* ---------- initialize hack state ---------- */
function initAccessState(){
  // deposit and plan already set in currentDeposit/currentPlan
  balance = currentDeposit || Math.max(1, Math.round(currentPlan * 0.10));
  level = 1;
  currentBet = 0;
  history = [];
  updateAccessUI();
}

/* ---------- bet calc (15%,30%,55%) ---------- */
function calcBet(){
  if(level === 1) return Math.max(1, Math.round(balance * 0.15));
  if(level === 2) return Math.max(1, Math.round(balance * 0.30));
  if(level === 3) return Math.max(1, Math.round(balance * 0.55));
  return 0;
}

/* ---------- prediction / simulate ---------- */
function getPrediction(){
  const p = document.getElementById('periodInput').value.trim();
  if(!/^[0-9]{3}$/.test(p)){ alert('Enter last 3 digits (3 digits)'); return; }
  currentBet = calcBet();
  const pred = Math.random() < 0.5 ? 'BIG' : 'SMALL';
  predictionText.innerText = `Period ${p}: Prediction = ${pred} â€¢ Bet = â‚¹${currentBet} (Level ${level})`;
}

/* ---------- handlers: win / loss ---------- */
function markWin(){
  if(currentBet <= 0){ alert('No active bet â€” click Get Prediction first'); return; }
  balance = Math.round(balance + currentBet);
  history.unshift({ time: new Date().toLocaleTimeString(), bet: currentBet, result: 'WIN', level: level});
  currentBet = 0;
  level = 1;
  updateAccessUI();
  checkTargetComplete();
}
function markLoss(){
  if(currentBet <= 0){ alert('No active bet â€” click Get Prediction first'); return; }
  balance = Math.max(0, balance - currentBet);
  history.unshift({ time: new Date().toLocaleTimeString(), bet: currentBet, result: 'LOSS', level: level});
  if(level < 3) level++; else level = 1;
  currentBet = 0;
  updateAccessUI();
  checkTargetComplete();
}

/* ---------- update UI / history ---------- */
function updateAccessUI(){
  balanceVal.innerText = balance;
  targetRange.innerText = `${currentDeposit} to ${currentPlan}`;
  historyBox.innerHTML = history.map(h=>`${h.time} â€” Bet â‚¹${h.bet} â€” ${h.result} (L${h.level})`).join('<br>');
  predictionText.innerText = predictionText.innerText || '';
}

/* ---------- reset session ---------- */
function resetSession(){
  if(!confirm('Reset this session?')) return;
  initAccessState();
  document.getElementById('periodInput').value = '';
  predictionText.innerText = '';
}

/* ---------- target completion ---------- */
function checkTargetComplete(){
  if(balance >= currentPlan){
    setTimeout(()=> {
      alert('ðŸŽ‰ Congratulations â€” Your Target is Complete!');
      // go back to dashboard
      showScreen('dashboard');
    }, 250);
  }
}

/* ---------- init ---------- */
renderPlans();
showScreen('dashboard');

/* optional: if admin approves while on same page via storage event, detect */
window.addEventListener('storage', function(ev){
  if(!ev.key) return;
  if(ev.key.startsWith('approved_')){
    const approvedUtr = ev.key.replace('approved_','');
    // if user had a pending UTR and its approved, handle it
    if(pendingUTR && approvedUtr === pendingUTR){
      handleApproved(approvedUtr, ev.newValue);
    }
  }
});
</script>
</body>
</html>


Iss code me yee sab edit kr ke file dena hai
