<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WINGO AI Real Prediction Tool</title>
  <style>
    body {
      background: #0d0d0d;
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px;
    }
    h1 {
      color: #00ffe0;
      margin-bottom: 10px;
    }
    .number-buttons {
      display: grid;
      grid-template-columns: repeat(5, 60px);
      gap: 10px;
      margin-bottom: 20px;
    }
    .number-buttons button {
      background: #222;
      color: #00ffe0;
      border: 1px solid #00ffe0;
      font-size: 18px;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
    }
    .input-sequence {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 20px;
    }
    .input-sequence span {
      background: #222;
      border: 1px solid #555;
      border-radius: 5px;
      padding: 8px 12px;
      margin: 5px;
      font-size: 18px;
    }
    .input-sequence span:hover {
      background: #ff4444;
      cursor: pointer;
    }
    button.predict-btn {
      padding: 10px 20px;
      background-color: #00ffe0;
      color: #000;
      font-weight: bold;
      border: none;
      cursor: pointer;
      font-size: 18px;
      border-radius: 8px;
    }
    #result {
      margin-top: 20px;
      font-size: 20px;
      background: #111;
      padding: 20px;
      border: 2px solid #00ffe0;
      border-radius: 10px;
      text-align: center;
      width: 100%;
      max-width: 600px;
    }
    .chart {
      margin-top: 30px;
      width: 100%;
      max-width: 600px;
      background: #1a1a1a;
      padding: 20px;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <h1>WINGO AI Real Prediction</h1>

  <div class="number-buttons" id="numberButtons"></div>
  <div class="input-sequence" id="inputSequence"></div>
  <button class="predict-btn" onclick="predictAI()">Predict Now</button>
  <div id="result">Prediction will appear here.</div>

  <div class="chart">
    <h3>Prediction Chart (Last 5)</h3>
    <div id="chartHistory"></div>
  </div>

  <audio id="soundSuccess" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
  <audio id="soundRisk" src="https://www.soundjay.com/button/beep-07.wav"></audio>

  <script>
    let sequence = [];
    let predictionHistory = [];
    const sequenceContainer = document.getElementById("inputSequence");
    const numberButtonsContainer = document.getElementById("numberButtons");
    const chartContainer = document.getElementById("chartHistory");

    for (let i = 0; i <= 9; i++) {
      const btn = document.createElement("button");
      btn.innerText = i;
      btn.onclick = () => {
        if (sequence.length < 15) {
          sequence.push(i);
          updateSequenceDisplay();
        }
      };
      numberButtonsContainer.appendChild(btn);
    }

    function updateSequenceDisplay() {
      sequenceContainer.innerHTML = '';
      sequence.forEach((num, index) => {
        const span = document.createElement("span");
        span.innerText = num;
        span.title = "Click to remove";
        span.onclick = () => {
          sequence.splice(index, 1);
          updateSequenceDisplay();
        };
        sequenceContainer.appendChild(span);
      });
    }

    function predictAI() {
      if (sequence.length < 15) {
        document.getElementById("result").innerHTML = "‚ùå Please enter 15 numbers by tapping buttons.";
        return;
      }

      const last15 = sequence;
      const bigSmall = last15.map(n => n >= 5 ? 'B' : 'S');

      let bigCount = bigSmall.filter(c => c === 'B').length;
      let smallCount = 15 - bigCount;
      let patternScore = 0;

      // Logic 1: Trend Flow
      patternScore += (bigCount > smallCount) ? 1 : -1;

      // Logic 2: Last 3 same trend => possible reversal
      const last3 = bigSmall.slice(-3);
      if (last3.every(v => v === 'B')) patternScore -= 2;
      if (last3.every(v => v === 'S')) patternScore += 2;

      // Logic 3: Zigzag pattern in last 5
      const zigzag = bigSmall.slice(-5).every((v, i, arr) => i === 0 || v !== arr[i - 1]);
      if (zigzag) patternScore += 1;

      // Logic 4: Shift detection
      const biasShift = bigSmall.slice(0, 5).filter(c => c === 'B').length - bigSmall.slice(10).filter(c => c === 'B').length;
      if (biasShift >= 3) patternScore -= 1;
      else if (biasShift <= -3) patternScore += 1;

      // Self-Learning: Adjust weight if last prediction failed
      if (predictionHistory.length >= 2) {
        const last = predictionHistory[predictionHistory.length - 1];
        const prev = predictionHistory[predictionHistory.length - 2];
        if (last.result !== last.prediction) {
          patternScore += (last.prediction === "Small" ? 1 : -1);
        }
      }

      let prediction = "";
      let confidence = 50 + (patternScore * 10);
      confidence = Math.max(10, Math.min(95, confidence));

      if (patternScore > 1) prediction = "Small";
      else if (patternScore < -1) prediction = "Big";
      else prediction = last15[last15.length - 1] >= 5 ? "Small" : "Big";

      let resultMsg = `ü§ñ Prediction: <b>${prediction}</b><br>üß† Chance: <b>${confidence}%</b>`;
      if (confidence >= 85) {
        resultMsg += "<br>üí• Strong pattern detected.";
        document.getElementById("soundSuccess").play();
      } else if (confidence <= 40) {
        resultMsg += "<br>‚ö†Ô∏è Risky prediction, play cautiously.";
        document.getElementById("soundRisk").play();
      } else {
        resultMsg += "<br>‚úÖ Normal prediction.";
      }

      document.getElementById("result").innerHTML = resultMsg;

      predictionHistory.push({ prediction, result: "Unknown" });
      if (predictionHistory.length > 5) predictionHistory.shift();

      chartContainer.innerHTML = predictionHistory.map((entry, i) => `#${i+1}: <b>${entry.prediction}</b> (${entry.result})`).join('<br>');
    }
  </script>
</body>
</html>
